<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hamin ChatLab — Sites & Chat</title>
    <meta name="description" content="Hamin의 개인 사이트 런처 및 실시간 채팅 실험 프로젝트입니다.">
    <meta name="theme-color" content="#0b0d10" id="meta-theme-color">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="/styles.css">

    <!-- Open Graph / Social -->
    <meta property="og:title" content="Hamin ChatLab — Sites & Chat">
    <meta property="og:description" content="Hamin의 개인 사이트 런처 — 자주 쓰는 사이트를 빠르게 접속하세요.">
    <meta property="og:image" content="/icons/icon-192.png">
    <meta property="og:url" content="https://ha-min1.github.io/">
    <meta name="twitter:card" content="summary_large_image">

    <!-- API base: 빈값이면 상대경로('/api/..') 사용. 개발 시 localhost로 설정하려면 아래 메타 태그를 수정하세요 -->
    <meta name="api-base" content="">
    <!-- 서버 URL (기본: 로컬 개발 서버). 필요하면 배포 환경에 맞게 변경하세요 -->
    <meta name="server-url" content="http://localhost:3000">
</head>
<body>
    <a class="skip-link" href="#main">Skip to content</a>
    <div class="container">
        <header class="site-header">
            <h1 class="site-title">Sites Collector</h1>
            <p class="site-sub">자주 쓰는 사이트를 한 곳에 모아 빠르게 이동</p>

            <div class="header-controls" role="region" aria-label="controls">
                <input id="search" class="search-input" type="search" placeholder="검색 (예: YouTube, Gmail)" aria-label="사이트 검색">
                <button id="add-btn" class="btn" aria-haspopup="dialog">추가 +</button>
                <button id="theme-toggle" class="btn" aria-pressed="false" title="테마 전환">🌙</button>
                <button id="export-btn" class="btn" title="설정 내보내기">내보내기</button>
            </div>
        </header>
        
        <main id="main">
        <div class="app-grid">


            <a href="https://kuis.konkuk.ac.kr/index.do" class="app-button" target="_blank" rel="noopener noreferrer">
                <div class="app-icon">
                    <img src="icons/건국대logo.png" alt="건국대 로고" class="icon-img">
                </div>
                <div class="app-name">건국대 홈페이지</div>
            </a>
            
            <a href="https://portal.konkuk.ac.kr/" class="app-button" target="_blank" rel="noopener noreferrer">
                <div class="app-icon">
                    <img src="icons/건국대logo.png" alt="건국대 로고" class="icon-img">
                </div>
                <div class="app-name">건국대 포털</div>
            </a>
            
            
            <a href="https://account.everytime.kr/login" class="app-button" target="_blank" rel="noopener noreferrer">
                <div class="app-icon" aria-hidden="true">▶️</div>
                <div class="app-name">EveryTime</div>
            </a>

             <a href="https://chat.deepseek.com/" class="app-button" target="_blank" rel="noopener noreferrer">
    <div class="app-icon">
        <img src="icons/AI.png" alt="Deepseek AI" class="icon-img">
    </div>
    <div class="app-name">Deepseek</div>
</a>
            
            <a href="https://www.mycompiler.io/ko/new/cpp" class="app-button" target="_blank" rel="noopener noreferrer">
                <div class="app-icon" aria-hidden="true">💻</div>
                <div class="app-name">C++</div>
            </a>
            <a href="https://library.konkuk.ac.kr/" class="app-button" target="_blank" rel="noopener noreferrer">
                <div class="app-icon" aria-hidden="true">📚</div>
                <div class="app-name">건국대 도서관</div>
            </a>
            <a href="https://solved.ac/en" class="app-button" target="_blank">
                <div class="app-icon" aria-hidden="true">💻</div>
                <div class="app-name">ProblemSolve</div>
            </a>

                        <a href="https://ha-min1.github.io/webgame/" class="app-button" target="_blank" rel="noopener noreferrer">
                                <div class="app-icon" aria-hidden="true">🎮</div>
                                <div class="app-name">벽돌 깨기</div>
                        </a>

                                              <a href="https://github.com/codespaces" class="app-button" target="_blank" rel="noopener noreferrer">
                            <div class="app-icon">
                                <img src="icons/github.png" alt="GitHub logo" class="icon-img">
                            </div>
                            <div class="app-name">GitHub Codespaces</div>
                        </a>
                        <a href="https://www.instagram.com/" class="app-button" target="_blank" rel="noopener noreferrer">
                            <div class="app-icon">
                                <img src="icons/instagram.png" alt="Instagram logo" class="icon-img">
                            </div>
                            <div class="app-name">Instagram</div>
                        </a>
        </div>

        <!-- 채팅 UI는 제거되었습니다 (2025-12-25). 채팅 서버는 백엔드에 유지되어 있으며, 프론트엔드는 필요 시 README의 지침을 따라 재적용하세요. -->
                </main>

                <section class="instructions" aria-labelledby="install-heading">
               <div class="badge">
           <a href="https://github.com/Ha-min1" target="_blank" rel="noopener noreferrer" class="badge-link">Developer · Hamin</a>
               </div>
              <!-- Developer profile / project info (moved here per request) -->
              <div class="dev-profile" aria-label="Developer profile">
                 <div class="dev-title">Hamin · Hamin ChatLab</div>
                 <div class="dev-links"><a href="https://github.com/Ha-min1" target="_blank" rel="noopener noreferrer">GitHub</a> · <a href="https://www.acmicpc.net/user/johamin3624" target="_blank" rel="noopener noreferrer">Baekjoon</a></div>
                 <div class="dev-lang">주 언어: C / C++</div>
              </div>
                        <h3 id="install-heading">📱 iOS에 앱으로 설치하는 법</h3>
            <ol>
                <li>Safari 브라우저에서 이 페이지 열기</li>
                <li>공유 버튼(⬆️) 누르기</li>
                <li>"홈 화면에 추가" 선택하기</li>
                <li>추가 버튼 누르기</li>
            </ol>
            <p>추가된 아이콘을 통해 접속할 수 있습니다!</p>
                        <p>추가 문의는 <a target="_blank" rel="noreferrer noopener" href="mailto:johamin3624@naver.com?subject=%5B문의%5D%20내%20사이트%20런처%20관련" class="link-mail" aria-label="이메일로 문의하기">이메일로 문의하기</a>에서 작성해주세요!</p>
        </section>
    </div>

    <!-- Add Link Modal -->
    <div id="add-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="add-modal-title">
      <div class="modal-content">
        <h3 id="add-modal-title">링크 추가</h3>
        <form id="add-form">
          <label>이름 <input id="add-name" required></label>
          <label>URL <input id="add-url" type="url" required placeholder="https://"></label>
          <label>아이콘 (emoji 또는 이미지 URL) <input id="add-icon" placeholder="▶️ 또는 https://..."></label>
          <div class="modal-actions">
            <button type="submit" class="btn primary">저장</button>
            <button type="button" class="btn" id="add-cancel">취소</button>
          </div>
        </form>
        <p class="muted">항목을 길게 눌러 드래그로 재정렬 할 수 있습니다.</p>
      </div>
    </div>

    <script>
    (function(){
      const STORAGE_KEY = 'hamin_links_v1';
      const THEME_KEY = 'hamin_theme';
      const grid = document.querySelector('.app-grid');
      const searchInput = document.getElementById('search');
      const addBtn = document.getElementById('add-btn');
      const addModal = document.getElementById('add-modal');
      const addForm = document.getElementById('add-form');
      const addCancel = document.getElementById('add-cancel');
      const themeToggle = document.getElementById('theme-toggle');
      const exportBtn = document.getElementById('export-btn');
      const metaTheme = document.getElementById('meta-theme-color');

      // PWA registration
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('sw.js')
          .then(function(registration) {
            console.log('ServiceWorker 등록 성공: ', registration.scope);
          })
          .catch(function(error) {
            console.log('ServiceWorker 등록 실패: ', error);
          });
        });
      }

      // Helper to save/load
      function saveLinks(links){
        localStorage.setItem(STORAGE_KEY, JSON.stringify(links));
      }
      function loadLinks(){
        const raw = localStorage.getItem(STORAGE_KEY);
        if(raw) try { return JSON.parse(raw); } catch(e) { console.warn('링크 로드 실패', e); }
        // Seed from DOM
        const seed = Array.from(document.querySelectorAll('.app-button')).map(a => ({
          name: a.querySelector('.app-name')?.textContent?.trim() || a.href,
          url: a.href,
          icon: a.querySelector('img')?.getAttribute('src') || a.querySelector('.app-icon')?.textContent?.trim() || '',
          isImage: !!a.querySelector('img')
        }));
        saveLinks(seed);
        return seed;
      }

      let links = loadLinks();

      function renderLinks(filter){
        grid.innerHTML = '';
        const q = filter ? filter.toLowerCase() : '';
        links.forEach((link, i) => {
          const a = document.createElement('a');
          a.className = 'app-button';
          a.href = link.url;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.draggable = true;
          a.setAttribute('data-index', i);

          const icon = document.createElement('div');
          icon.className = 'app-icon';
          if(link.isImage && link.icon){
            const img = document.createElement('img'); img.src = link.icon; img.alt = link.name + ' icon'; img.className='icon-img'; icon.appendChild(img);
          } else {
            icon.textContent = link.icon || '▶️';
            icon.setAttribute('aria-hidden', 'true');
          }

          const name = document.createElement('div');
          name.className = 'app-name';
          name.textContent = link.name;

          if(q && !(link.name.toLowerCase().includes(q) || link.url.toLowerCase().includes(q))) return;

          a.appendChild(icon); a.appendChild(name);

          // click visual feedback
          a.addEventListener('click', e => {
            a.classList.add('pressed'); setTimeout(()=>a.classList.remove('pressed'),180);
          });

          // drag events
          a.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', i);
            a.classList.add('dragging');
          });
          a.addEventListener('dragend', () => a.classList.remove('dragging'));

          a.addEventListener('dragover', (e) => { e.preventDefault(); });
          a.addEventListener('drop', (e) => {
            e.preventDefault();
            const from = Number(e.dataTransfer.getData('text/plain'));
            const to = Number(a.getAttribute('data-index'));
            if(!isNaN(from) && from !== to){
              const item = links.splice(from,1)[0];
              links.splice(to,0,item);
              saveLinks(links);
              renderLinks(searchInput.value);
            }
          });

          grid.appendChild(a);
        });
      }

      // initial render
      renderLinks();

      // search
      searchInput.addEventListener('input', () => renderLinks(searchInput.value));

      // add modal
      addBtn.addEventListener('click', () => openModal());
      addCancel.addEventListener('click', () => closeModal());
      addForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('add-name').value.trim();
        const url = document.getElementById('add-url').value.trim();
        const icon = document.getElementById('add-icon').value.trim();
        if(!name || !url) return;
        const isImage = /^https?:\/\/.+\.(png|jpg|jpeg|svg|gif)$/i.test(icon);
        links.push({name, url, icon, isImage});
        saveLinks(links);
        renderLinks(searchInput.value);
        closeModal();
        addForm.reset();
      });

      function openModal(){ addModal.style.display='block'; addModal.setAttribute('aria-hidden','false'); document.getElementById('add-name').focus(); }
      function closeModal(){ addModal.style.display='none'; addModal.setAttribute('aria-hidden','true'); }
      // close on overlay click
      addModal.addEventListener('click', (e) => { if(e.target === addModal) closeModal(); });

      // export
      exportBtn.addEventListener('click', () => {
        const blob = new Blob([JSON.stringify(links, null, 2)], {type:'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href = url; a.download = 'hamin_links.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      });

      // theme
      function applyTheme(t){
        if(t === 'light'){
          document.documentElement.setAttribute('data-theme','light');
          themeToggle.textContent = '🌞'; themeToggle.setAttribute('aria-pressed','true');
          if(metaTheme) metaTheme.setAttribute('content','#ffffff');
        } else {
          document.documentElement.removeAttribute('data-theme');
          themeToggle.textContent = '🌙'; themeToggle.setAttribute('aria-pressed','false');
          if(metaTheme) metaTheme.setAttribute('content','#0b0d10');
        }
        localStorage.setItem(THEME_KEY, t);
      }

      themeToggle.addEventListener('click', () => applyTheme(localStorage.getItem(THEME_KEY) === 'light' ? 'dark' : 'light'));

      // load theme
      applyTheme(localStorage.getItem(THEME_KEY) || 'dark');

      // keyboard: ESC closes modal
      window.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeModal(); });

    })();
    </script>
    
    <!-- 채팅 관련 클라이언트 스크립트는 제거되었습니다 -->
</body>
</html>
